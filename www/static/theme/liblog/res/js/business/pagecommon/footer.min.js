$(window).scroll(function(){0!=$(this).scrollTop()?$("#back-top").fadeIn():$("#back-top").fadeOut()});var chatRobotFlag=!1;function toNomalTime(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}function sendMessage(){var e=$(".input-box").val(),t={message:e,__CSRF__:G_csrf};if(""!==e.trim()){var o='        <div class="section-box-you">\n            <div>\n                <div>\n                    <span class="robot-time">'+toNomalTime((new Date).getTime())+'</span>\n                    <span class="robot-name">大佬007</span>\n                </div>\n                <div class="word-content">'+e+'</div>\n            </div>\n            <a class="section-icon" href="/login.html">\n                <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#iconniu"></use>\n                </svg>\n            </a>\n        </div>';$(".section").append(o),$.ajax({url:"/robot/index/robotchat",data:t,type:"POST",success:function(e){var t='        <div class="section-box">\n            <a class="section-icon" href="https://github.com/saucxs/chat-robot" target="_blank">\n                <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#iconrobot"></use>\n                </svg>\n            </a>\n            <div>\n                <div>\n                    <span class="robot-name">'+e.user+'</span>\n                    <span class="robot-time">'+toNomalTime((new Date).getTime())+'</span>\n                </div>\n                <div class="word-content">'+e.data+"</div>\n            </div>\n        </div>";$(".section").append(t),$(".section").animate({scrollTop:$(document).height()},1e3),$(".input-box").val(""),$(".chat-room .input-box").removeClass("tip-input")}})}else $(".chat-room .input-box").addClass("tip-input")}$(document).on("click",function(e){$(".chat-room").fadeOut(),chatRobotFlag=!chatRobotFlag}),$(".chat-room").on("click",function(e){e.stopPropagation()}),$("#chat-robot").on("click",function(e){e.stopPropagation(),chatRobotFlag?$(".chat-room").fadeOut():($(".chat-room").fadeIn(),$(".robot-time").text(toNomalTime((new Date).getTime()))),chatRobotFlag=!chatRobotFlag}),$(".input-box").keydown(function(e){13===e.keyCode&&sendMessage()}),$(".input-box").keyup(function(e){""!==$(".input-box").val().trim()?$(".chat-room .input-box").removeClass("tip-input"):$(".chat-room .input-box").addClass("tip-input")}),$("#send-message").on("click",function(){sendMessage()}),$.ajax({url:"https://api.github.com/repos/saucxs/nodeJSBlog",type:"GET",success:function(e){e&&$("#gitcount").html(e.stargazers_count)}}),$("#back-top").on("click",function(){$("html,body").animate({scrollTop:"0"})}),$(".search-show").on("click",function(){$(".site-search").toggleClass("active"),$(this).find(".fa-search").toggleClass("fa-remove")}),$(".collect_btn").bind("click",function(){var t=$(this),e={url:window.location.pathname,title:$("#article-title").html(),author:$("#loginname").val(),flag:t.attr("flag"),cid:t.attr("cid"),createtime:new Date,type:t.attr("itype"),aid:t.attr("aid"),__CSRF__:G_csrf};$.ajax({url:"/personal/index/savecollect",data:e,type:"POST",success:function(e){0===e.errno?0===e.data.status?(t.attr("cid",""),t.removeClass("cancel"),t.val("收藏")):1===e.data.status&&(t.attr("cid",e.data.cid),t.addClass("cancel"),t.val("取消收藏")):alert(e.errmsg)}})}),$("#nav-tabs").delegate("li","click",function(){var e=$(this),t=e.attr("pid");$("#nav-tabs").find("li").removeClass("active"),$(".tab-pane").removeClass("active"),$(".tab-pane").hide(),e.addClass("active"),$("#"+t).show()}),$("#userInfo").on("mouseover",function(){$("#userMenu").show()}),$("#userInfo").on("mouseout",function(){$("#userMenu").hide()});var otb=document.getElementById("tb");if(otb)for(var oLi=document.getElementById("tb").getElementsByTagName("li"),oUl=document.getElementById("tb-main").getElementsByTagName("div"),i=0;i<oLi.length;i++)oLi[i].index=i,oLi[i].onmouseover=function(){for(var e=0;e<oLi.length;e++)oLi[e].className="";this.className="cur";for(e=0;e<oUl.length;e++)oUl[e].style.display="none";oUl[this.index].style.display="block"};function browserCheck(){for(var e=window.navigator&&window.navigator.userAgent||this.http&&this.http.userAgent()||"",t=e.match(/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|Mobile/),o=[["Edge",/Edge\/([0-9\._]+)/],["Yandexbrowser",/YaBrowser\/([0-9\._]+)/],["Chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["Crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["Firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["Opera",/Opera\/([0-9\.]+)(?:\s|$)/],["Opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["IE",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["IE",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["IE",/MSIE\s([6-8]\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["Android",/Android\s([0-9\.]+)/],["IOS",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["Safari",/Version\/([0-9\._]+).*Safari/],["UCBrowser",/UCBrowser\/([0-9\._]+)/]],n={},a=0;a<o.length;a++)if(o[a][1].test(e)){var s=o[a][1].exec(e),i=s&&s[1].split(/[._]/).slice(0,3);i.length<3&&(i.length=3,i[2]=0),n={browser:o[a][0],version:i[0],mobile:"Android"==o[a][0]||"IOS"==o[a][0]||"bb10"==o[a][0]||t&&t[0]||!1}}return n}$("#wechatIcon").on("click",function(){console.log($("#wechat").css("display"),"-=-=-=-=-=-"),"block"===$("#wechat").css("display")?$("#wechat").hide():$("#wechat").show()});var currentBrowser=browserCheck(),bigTitle=document.getElementById("big-title"),span=bigTitle.getElementsByTagName("span")[0],mask=document.getElementById("mask"),upgradeContent=document.getElementById("upgradeContent");currentBrowser.mobile?(console.log("当前是移动端"),$("#wechatIcon").fadeIn(),$("#wechat").fadeOut()):"Chrome"==currentBrowser.browser&&currentBrowser.version<40||"Firefox"==currentBrowser.browser&&currentBrowser.version<50||"IE"==currentBrowser.browser&&currentBrowser.version<10||"Safari"==currentBrowser.browser&&currentBrowser.version<11?(mask.style.display="block",upgradeContent.style.display="block",span.innerHTML=currentBrowser.browser+currentBrowser.version):($("#wechatIcon").fadeIn(),$("#wechat").fadeOut(),mask.style.display="none",upgradeContent.style.display="none");
(function(){var n;n=function(){function t(t,i){this.startInterval=6e4,this.init(t,i)}return t.prototype.init=function(t,i){return this.$element=$(t),this.options=$.extend({},$.fn.timeago.defaults,i),this.updateTime(),this.startTimer()},t.prototype.startTimer=function(){var t;return(t=this).interval=setInterval(function(){return t.refresh()},this.startInterval)},t.prototype.stopTimer=function(){return clearInterval(this.interval)},t.prototype.restartTimer=function(){return this.stopTimer(),this.startTimer()},t.prototype.refresh=function(){return this.updateTime(),this.updateInterval()},t.prototype.updateTime=function(){var i;return(i=this).$element.findAndSelf(this.options.selector).each(function(){var t;return t=i.timeAgoInWords($(this).attr(i.options.attr)),$(this).html(t)})},t.prototype.updateInterval=function(){var t,i,e,n;if(0<this.$element.findAndSelf(this.options.selector).length){if("up"===this.options.dir?t=":first":"down"===this.options.dir&&(t=":last"),n=this.$element.findAndSelf(this.options.selector).filter(t).attr(this.options.attr),i=this.parse(n),0<=(e=this.getTimeDistanceInMinutes(i))&&e<=44&&6e4!==this.startInterval)return this.startInterval=6e4,this.restartTimer();if(45<=e&&e<=89&&132e4!==this.startInterval)return this.startInterval=132e4,this.restartTimer();if(90<=e&&e<=2519&&18e5!==this.startInterval)return this.startInterval=18e5,this.restartTimer();if(2520<=e&&432e5!==this.startInterval)return this.startInterval=432e5,this.restartTimer()}},t.prototype.timeAgoInWords=function(t){var i;return i=this.parse(t),""+this.options.lang.prefixes.ago+this.distanceOfTimeInWords(i)+this.options.lang.suffix},t.prototype.parse=function(t){var i;return i=(i=(i=(i=(i=$.trim(t)).replace(/\.\d\d\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},t.prototype.getTimeDistanceInMinutes=function(t){var i;return i=(new Date).getTime()-t.getTime(),Math.round(Math.abs(i)/1e3/60)},t.prototype.distanceOfTimeInWords=function(t){var i;return 0===(i=this.getTimeDistanceInMinutes(t))?this.options.lang.prefixes.lt+" "+this.options.lang.units.minute:1===i?"1 "+this.options.lang.units.minute:2<=i&&i<=44?i+" "+this.options.lang.units.minutes:45<=i&&i<=89?this.options.lang.prefixes.about+" 1 "+this.options.lang.units.hour:90<=i&&i<=1439?this.options.lang.prefixes.about+" "+Math.round(i/60)+" "+this.options.lang.units.hours:1440<=i&&i<=2519?"1 "+this.options.lang.units.day:2520<=i&&i<=43199?Math.round(i/1440)+" "+this.options.lang.units.days:43200<=i&&i<=86399?this.options.lang.prefixes.about+" 1 "+this.options.lang.units.month:86400<=i&&i<=525599?Math.round(i/43200)+" "+this.options.lang.units.months:525600<=i&&i<=655199?this.options.lang.prefixes.about+" 1 "+this.options.lang.units.year:655200<=i&&i<=914399?this.options.lang.prefixes.over+" 1 "+this.options.lang.units.year:914400<=i&&i<=1051199?this.options.lang.prefixes.almost+" 2 "+this.options.lang.units.years:this.options.lang.prefixes.about+" "+Math.round(i/525600)+" "+this.options.lang.units.years},t}(),$.fn.timeago=function(e){return null==e&&(e={}),this.each(function(){var t,i;return(i=(t=$(this)).data("timeago"))?"string"==typeof e?i[e]():void 0:t.data("timeago",new n(this,e))})},$.fn.findAndSelf=function(t){return this.find(t).add(this.filter(t))},$.fn.timeago.Constructor=n,$.fn.timeago.defaults={selector:"time.timeago",attr:"datetime",dir:"up",lang:{units:{second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",month:"month",months:"months",year:"year",years:"years"},prefixes:{lt:"less than a",about:"about",over:"over",almost:"almost",ago:""},suffix:" ago"}}}).call(this);
(function(){$.fn.timeago.defaults.lang={units:{second:"秒",seconds:"秒",minute:"分钟",minutes:"分钟",hour:"小时",hours:"小时",day:"天",days:"天",month:"月",months:"月",year:"年",years:"年"},prefixes:{lt:"不到 1",about:"约",over:"超过",almost:"接近",ago:""},suffix:"前"}}).call(this);