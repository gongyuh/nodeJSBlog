$(window).scroll(function(){0!=$(this).scrollTop()?$("#back-top").fadeIn():$("#back-top").fadeOut()});var chatRobotFlag=!1;function toNomalTime(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}function sendMessage(){var e=$(".input-box").val(),t={message:e,__CSRF__:G_csrf};if(""!==e.trim()){var o='        <div class="section-box-you">\n            <div>\n                <div>\n                    <span class="robot-time">'+toNomalTime((new Date).getTime())+'</span>\n                    <span class="robot-name">大佬007</span>\n                </div>\n                <div class="word-content">'+e+'</div>\n            </div>\n            <a class="section-icon" href="/login.html">\n                <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#iconniu"></use>\n                </svg>\n            </a>\n        </div>';$(".section").append(o),$.ajax({url:"/robot/index/robotchat",data:t,type:"POST",success:function(e){var t='        <div class="section-box">\n            <a class="section-icon" href="https://github.com/saucxs/chat-robot" target="_blank">\n                <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#iconrobot"></use>\n                </svg>\n            </a>\n            <div>\n                <div>\n                    <span class="robot-name">'+e.user+'</span>\n                    <span class="robot-time">'+toNomalTime((new Date).getTime())+'</span>\n                </div>\n                <div class="word-content">'+e.data+"</div>\n            </div>\n        </div>";$(".section").append(t),$(".section").animate({scrollTop:$(document).height()},1e3),$(".input-box").val(""),$(".chat-room .input-box").removeClass("tip-input")}})}else $(".chat-room .input-box").addClass("tip-input")}$(document).on("click",function(e){$(".chat-room").fadeOut(),chatRobotFlag=!chatRobotFlag}),$(".chat-room").on("click",function(e){e.stopPropagation()}),$("#chat-robot").on("click",function(e){e.stopPropagation(),chatRobotFlag?$(".chat-room").fadeOut():($(".chat-room").fadeIn(),$(".robot-time").text(toNomalTime((new Date).getTime()))),chatRobotFlag=!chatRobotFlag}),$(".input-box").keydown(function(e){13===e.keyCode&&sendMessage()}),$(".input-box").keyup(function(e){""!==$(".input-box").val().trim()?$(".chat-room .input-box").removeClass("tip-input"):$(".chat-room .input-box").addClass("tip-input")}),$("#send-message").on("click",function(){sendMessage()}),$.ajax({url:"https://api.github.com/repos/saucxs/nodeJSBlog",type:"GET",success:function(e){e&&$("#gitcount").html(e.stargazers_count)}}),$("#back-top").on("click",function(){$("html,body").animate({scrollTop:"0"})}),$(".search-show").on("click",function(){$(".site-search").toggleClass("active"),$(this).find(".fa-search").toggleClass("fa-remove")}),$(".collect_btn").bind("click",function(){var t=$(this),e={url:window.location.pathname,title:$("#article-title").html(),author:$("#loginname").val(),flag:t.attr("flag"),cid:t.attr("cid"),createtime:new Date,type:t.attr("itype"),aid:t.attr("aid"),__CSRF__:G_csrf};$.ajax({url:"/personal/index/savecollect",data:e,type:"POST",success:function(e){0===e.errno?0===e.data.status?(t.attr("cid",""),t.removeClass("cancel"),t.val("收藏")):1===e.data.status&&(t.attr("cid",e.data.cid),t.addClass("cancel"),t.val("取消收藏")):alert(e.errmsg)}})}),$("#nav-tabs").delegate("li","click",function(){var e=$(this),t=e.attr("pid");$("#nav-tabs").find("li").removeClass("active"),$(".tab-pane").removeClass("active"),$(".tab-pane").hide(),e.addClass("active"),$("#"+t).show()}),$("#userInfo").on("mouseover",function(){$("#userMenu").show()}),$("#userInfo").on("mouseout",function(){$("#userMenu").hide()});var otb=document.getElementById("tb");if(otb)for(var oLi=document.getElementById("tb").getElementsByTagName("li"),oUl=document.getElementById("tb-main").getElementsByTagName("div"),i=0;i<oLi.length;i++)oLi[i].index=i,oLi[i].onmouseover=function(){for(var e=0;e<oLi.length;e++)oLi[e].className="";this.className="cur";for(e=0;e<oUl.length;e++)oUl[e].style.display="none";oUl[this.index].style.display="block"};function browserCheck(){for(var e=window.navigator&&window.navigator.userAgent||this.http&&this.http.userAgent()||"",t=e.match(/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|Mobile/),o=[["Edge",/Edge\/([0-9\._]+)/],["Yandexbrowser",/YaBrowser\/([0-9\._]+)/],["Chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["Crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["Firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["Opera",/Opera\/([0-9\.]+)(?:\s|$)/],["Opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["IE",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["IE",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["IE",/MSIE\s([6-8]\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["Android",/Android\s([0-9\.]+)/],["IOS",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["Safari",/Version\/([0-9\._]+).*Safari/],["UCBrowser",/UCBrowser\/([0-9\._]+)/]],n={},a=0;a<o.length;a++)if(o[a][1].test(e)){var s=o[a][1].exec(e),i=s&&s[1].split(/[._]/).slice(0,3);i.length<3&&(i.length=3,i[2]=0),n={browser:o[a][0],version:i[0],mobile:"Android"==o[a][0]||"IOS"==o[a][0]||"bb10"==o[a][0]||t&&t[0]||!1}}return n}$("#wechatIcon").on("click",function(){console.log($("#wechat").css("display"),"-=-=-=-=-=-"),"block"===$("#wechat").css("display")?$("#wechat").hide():$("#wechat").show()});var currentBrowser=browserCheck(),bigTitle=document.getElementById("big-title"),span=bigTitle.getElementsByTagName("span")[0],mask=document.getElementById("mask"),upgradeContent=document.getElementById("upgradeContent");currentBrowser.mobile?(console.log("当前是移动端"),$("#wechatIcon").fadeIn(),$("#wechat").fadeOut()):"Chrome"==currentBrowser.browser&&currentBrowser.version<40||"Firefox"==currentBrowser.browser&&currentBrowser.version<50||"IE"==currentBrowser.browser&&currentBrowser.version<10||"Safari"==currentBrowser.browser&&currentBrowser.version<11?(mask.style.display="block",upgradeContent.style.display="block",span.innerHTML=currentBrowser.browser+currentBrowser.version):($("#wechatIcon").fadeIn(),$("#wechat").fadeOut(),mask.style.display="none",upgradeContent.style.display="none");